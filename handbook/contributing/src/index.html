<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.5.3, mkdocs-terminal-4.4.0">
     
     
    <link rel="icon" type="image/png" sizes="192x192" href="../../../img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="../../../img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="../../../img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="../../../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../../../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../../../img/favicon-32x32.png" />


    
 
<title>Source tree Internals - Kreato Linux Documentation</title>


<link href="../../../css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="../../../css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="../../../css/normalize.css" rel="stylesheet">
<link href="../../../css/terminal.css" rel="stylesheet">
<link href="../../../css/theme.css" rel="stylesheet">
<link href="../../../css/theme.tile_grid.css" rel="stylesheet">
<link href="../../../css/theme.footer.css" rel="stylesheet">
<!-- gruvbox_dark color palette -->
<link href="../../../css/palettes/gruvbox_dark.css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>



     
    
    

    
    <!-- search css support -->
<link href="../../../css/search/bootstrap-modal.css" rel="stylesheet">
<!-- search scripts -->
<script>
    var base_url = "../../..",
    shortcuts = "{}";
</script>
<script src="../../../js/jquery/jquery-1.10.1.min.js" defer></script>
<script src="../../../js/bootstrap/bootstrap.min.js" defer></script>
<script src="../../../js/mkdocs/base.js" defer></script>
    
    
    
    
    <script src="../../../search/main.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="/" class="no-style">Kreato Linux Documentation</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../.." class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Welcome</span>
                    </a>
                    <meta property="position" content="0">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../history/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">History</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../kreaiso/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Kreaiso</span>
                    </a>
                    <meta property="position" content="2">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../kreato-release/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">kreato-release file</span>
                    </a>
                    <meta property="position" content="3">
                </li>
                
                
                
                
                
                    
                    
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../..">Welcome</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../history/">History</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../kreaiso/">Kreaiso</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../kreato-release/">kreato-release file</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">WIP</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../WIP/">Welcome</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        <span class="
        
    

    terminal-mkdocs-side-nav-item--active terminal-mkdocs-side-nav-section-no-index">Handbook</span>
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../">Welcome</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../installation/">Installation</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../what-is-kreato-linux/">What is Kreato Linux?</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        <span class="
        
    

    terminal-mkdocs-side-nav-item--active terminal-mkdocs-side-nav-section-no-index">Contributing</span>
    
    </li>
            
            
    </ul>
        
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#source-tree-internals">Source tree Internals</a></li>
        <li><a href="#what-is-kpkg">What is kpkg?</a></li>
        <li><a href="#layout-of-the-source-tree">Layout of the source tree</a></li>
        <li><a href="#the-src-directory">The src directory</a></li>
        <li><a href="#kreastrap">kreastrap</a></li><li><a href="#purr">purr</a></li><li><a href="#chkupd">chkupd</a></li><li><a href="#mari">mari</a></li><li><a href="#kpkg">kpkg</a></li>
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
<section id="mkdocs-terminal-content">
    <h1 id="source-tree-internals">Source tree Internals</h1>
<p>Welcome! In this page you will find information as how kpkg works.</p>
<h1 id="what-is-kpkg">What is kpkg?</h1>
<p>kpkg is the rewrite of the package manager called <a href="https://github.com/kreatolinux/nyaa2">nyaa2</a> in Nim. It was originally called nyaa3. This has been done for many reasons, which i won't repeat here. Nyaa2 has more features in some areas, but is now <strong>unsupported</strong> and shouldn't be used.</p>
<h1 id="layout-of-the-source-tree">Layout of the source tree</h1>
<p>The layout of the project is really simple to understand.</p>
<ul>
<li><code>Makefile</code> allows you to install dependencies and build the project.</li>
<li><code>docker-compose.yml</code> is there for testing.</li>
<li><code>man</code> directory has the pandoc-generated manpages, which have their source files in <code>src/man</code>.</li>
<li><code>nix</code> directory contains nix build support. Please keep in mind that NixOS is a completely seperate project, we just have it as a build tool option.</li>
</ul>
<h1 id="the-src-directory">The src directory</h1>
<p><code>src</code> directory has many projects, including (currently) purr for testing, kreastrap for building packages and rootfs automatically, kpkg for package management, chkupd for version checking and mari for the binary repository.</p>
<h2 id="kreastrap">kreastrap</h2>
<p><code>src/kreastrap</code> has the source code of kreastrap. Kreastrap v3 is the newest rewite the Kreato Linux build tool. It is rewritten in Nim, so it can utilize kpkg's internal functions and have better error handling than nyaastrap v2. It allows you to build packages, and an rootfs. More features may come soon.</p>
<p>You can learn how to build an rootfs <a href="../how-to-rootfs/">through here</a>.</p>
<h2 id="purr">purr</h2>
<p><code>src/purr</code> has the source code of purr. Purr is an test utility, checking if things are still working the way they should.</p>
<p>Please note that both of these projects should be ran on an Docker container, which is why <code>docker-compose.yml</code> exists. <strong>DO NOT</strong> run these tests in your host machine, as it will probably break your host system and/or not work at all.</p>
<h2 id="chkupd">chkupd</h2>
<p><code>src/chkupd</code> has the source code for chkupd v3, a Nim rewrite of chkupd v2. It allows to maintain repositories easier by checking versions off Repology API and updating accordingly.</p>
<h2 id="mari">mari</h2>
<p><code>src/mari</code> has the source code for mari, a extremely simple HTTP server that uses the awesome httpbeast library. It is only for Kreato Linux binary repository.</p>
<h2 id="kpkg">kpkg</h2>
<p>The biggest project in the source tree which includes an easy-to-use library to use for other projects. It resides mostly in <code>src/kpkg</code> and is neatly seperated onto seperate files.
<code>src/kpkg/modules</code> includes more internal functions such as the downloader, the config system, etc.</p>
</section>

            </main>
        </div>
        <hr><footer>
    <div class="terminal-mkdocs-footer-grid">
        <div id="terminal-mkdocs-footer-copyright-info">
            
            <p class="text-center text-muted">Copyright &copy; 2023 Kreato</p>
             Site built with <a href="http://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.
        </div>
    </div>
</footer>
    </div>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="alertdialog" aria-modal="true" aria-labelledby="searchModalLabel">
    <div class="modal-dialog modal-lg" role="search">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close btn btn-default btn-ghost" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p id="searchInputLabel">Type to start searching</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" aria-labelledby="searchInputLabel" placeholder="" id="mkdocs-search-query" title="Please enter search terms here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No document matches found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
    
</body>

</html>